<html>
  <head>
    <title>Channel Vocoder</title>
    <link rel="stylesheet" href="app.css" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body class="center">
    <div id="status-message" class="hidden"></div>

    <h1 class="title">Channel Vocoder</h1>

    <div class="intro-description">
      A channel vocoder in the spirit of the
      <a
        href="https://ccrma.stanford.edu/~jos/sasp/Dudley_s_Channel_Vocoder.html"
        >original vocoder</a
      >. Pick two audio files, then hit the vocode button.
    </div>

    <div class="form">
      <span class="group">
        <input type="checkbox" id="mode-checkbox" />
        <label for="mode-checkbox">Mode: Nonstop</label>
      </span>

      <span class="group">
        <label for="file1">Carrier audio</label> <span class="expl">The signal you want to be modulated.(Usually a "harmonically rich" source like a triangle wave or a bassoon.)</span><br />
        <input
          id="file1"
          class="input-source"
          type="file"
          accept="audio/*, .m4a,.ogg,.mp3,.wav"
        />
        <div class="file1-audio hidden audio-display">
          <audio class="file1-audio-player" controls></audio>
        </div>
      </span>

      <span class="group">
        <label for="file2">Information audio</label> <span class="expl">The signal that you want to do the modulating. (Usually speech.)</span><br />
        <input
          id="file2"
          class="input-source"
          type="file"
          accept="audio/*, .m4a,.ogg,.mp3,.wav"
        />
        <div class="file2-audio hidden audio-display">
          <audio class="file2-audio-player" controls></audio>
        </div>
      </span>

      <span class="group">
        <button id="channel-button" class="hidden">Get channel signals</button>
      </span>

      <span class="group">
        <label for="q-val">Bandpass Q</label> <span class="expl">How narrow the bands that we capture from the information audio should be. Higher is narrower.</span>
        <input id="q-val" type="number" value="5.0" />

        <div class="bandpass-results"></div>
      </span>

      <span class="group">
        <label for="smoothing-factor-up">Smoothing factor, up</label> <span class="expl">How smoothly we should trace declines in the bandpassed signals to create envelopes. Higher is smoother, lower traces the signals more tightly.</span><br>
        <input id="smoothing-factor-up" type="number" value="0.3" /><br>
        <label for="smoothing-factor-down">Smoothing factor, down</label> <span class="expl">How smoothly we should trace rises in the bandpassed signals to create envelopes. Higher is smoother, lower traces the signals more tightly.</span><br>
        <input id="smoothing-factor-down" type="number" value="0.995" /><br>
        <button id="envelope-button" class="hidden">
          Get envelope followers for bands
        </button>
        <div class="envelopes"></div>
      </span>

      <span class="group">
        <button id="carrier-channel-button" class="hidden">
          Get channel signals for carrier
        </button>
        <div class="carrier-bandpass-results"></div>

        <label for="carrier-level">Carrier level</label> <span class="expl">How loud the carrier input to the modulation should be.</span><br>
        <input id="carrier-level" type="number" value="0.01" /><br>
        <label for="info-level">Info level</label> <span class="expl">How loud the information input to the modulation should be.</span><br>
        <input id="info-level" type="number" value="10000.0" />
      </span>

      <span class="group">
        <button id="modulate-button" class="hidden">Modulate</button>
        <div class="modulated-carrier-bandpasses"></div>
      </span>

      <span class="group">
        <button id="merge-button" class="hidden">
          Merge modulated signals
        </button>

        <button id="vocode-button" class="hidden">Vocode</button>

        <div class="result-audio audio-display hidden">
          <audio class="result-audio-player" controls></audio>
        </div>
      </span>
    </div>

    <div id="version-info"></div>

    <script src="index.js"></script>
  </body>
</html>
